---
title: 理解二进制整数编码
date: 2017-09-15 22:54:44
tags:
---

二进制整数只能表达非负数，所以要设计一个编码系统，将部分的正数的二进制表达让给负数使用，当然，在这样的编码系统中，这些正数将无法表达。

## 补码

模系统

模系统是针对于二进制整数的一个系统，一个二进制整数系统存在最大值X，如果`a % X == b % X`那么a,b等价。

钟表就是一个模系统，假设当前的时钟指向10点，为了让时钟指向6点，我们可以顺时针拨动8，或者逆时针拨动4.即


```
10-4 = 6

10+8 = 18

6 == 18（6和18等价）

6 % 12 = 18 % 12（因为它们模12的结果相同， 实际也是如此）

10 == 10（10和10等价）

-4 == 8（-4和8等价）

```

*这个模系统给我们最大的启示是，如果我们把8的二进制表达让给-4使用，在这个编码系统中10-4等于二进制的10+8，根据模系统的特性也等于二进制的10-4。这个编码系统就是补码*

补码的定义

1. 负数的补码等于X-负数的绝对值
2. 正数的补码等于二进制表达
3. 在X内部分只能表达[-X/2, X/2-1)

求负数补码的便捷算法：

1. 按位取反再加1

假设X是2^8, 即100000000

求-8的补码

根据前面的描述-8的补码就是 100000000 - 1000

可以写成 （011111111 - 1000） + 1

括号内的操作实际就是按位取反

2. 从右往左找到第一个1，将第一个1往右取反

因为在第一个1的右边都是0，所以按位取反再加1以后，因为进位，它们的值还是0，到第一个1的时候，1按位取反变为0，加入进位后为1，所以进位不再继续向后传递。1的左边只要按位取反即可。

变形补码

双符号位

## 原码

对于n位二进制数，将第一位保留做符号位，剩下n-1位作为数据位，符号位为0代表正数，符号位为1代表负数。

原码的问题在于加减运算无法统一。

## 移码

对于绝对值可以用n位二进制整数表达的正数和负数，加`$2^{n-1}$`得到一个非负数，然后使用二进制表达。这样的编码系统是移码。


移码在浮点数的阶部分使用， 移码和补码相比，单从二进制表达上来看，大小关系是正确的。有利于进行快速的阶比较。


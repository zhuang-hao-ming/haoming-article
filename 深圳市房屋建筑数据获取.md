
---
title: 深圳市房屋建筑数据获取
date: 2017-09-15 22:54:44
tags:
---
        
## 介绍：
[天地图.深圳](http://www.szgeoinfo.com/tdt/)平台，发布了深圳市的多套基础数据。数据的精度和质量都非常高。

平台包含了深圳市超过60万的建筑物数据，数据的质量非常高，不仅包含了建筑的footprint还有建筑物的高度数据。这些数据对于城市的3维建模和后续研究有很大的价值。

不知道是否是有意，这个网站的后台接口是直接暴露出来的，所以我用了一个简单的脚本，获取了60000条建筑物数据。




## 数据处理：

从服务器中导出的数据是arcgis的json格式，处理的第一步是将这些json数据转化为shp文件。

arcgis的工具箱中存在`json->feature`的工具，但是在这里遭遇了两个问题。

1. 导出的json文件是包含中文的，编码为utf-8，但是，arcgis10.2的这个工具存在bug，无法处理utf-8的中文，只能处理gb2312的中文。
2. 服务器的数据使用了一个奇特的自定义坐标系，奇特之处体现在它所使用的椭球，大地基准面的参数都让人无法理解。


在没有找到更好的解决方法之前，针对上面的两个问题，分别使用一下方法来解决。

1. 使用脚本，更改文件内容的编码，并且同时更改坐标系为epsg:3857，来让转换工具能够正常运行。
2. 使用arcgis的`spatial adjust`工具来进行矫正匹配到epsg:3857。
3. 进行merge

----------------

1. 通过google搜索可以发现很多arcgis server的管理后台，这些后台对数据库提供了详细的描述，为用户获取数据提供了方便，如果需要获得某些数据，可以考虑通过这个途径获得。
2. 了解esri的开源项目。